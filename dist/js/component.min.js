!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):((e="undefined"!=typeof globalThis?globalThis:e||self).AlpineMagicHelpers=e.AlpineMagicHelpers||{},e.AlpineMagicHelpers.component=n())}(this,function(){"use strict";var e=function(){if(!window.Alpine)throw new Error("[Magic Helpers] Alpine is required for the magic helpers to function correctly.");if(!window.Alpine.version||!function(e,n){for(var t=e.split("."),r=n.split("."),i=0;i<t.length;i++)if(!r[i]||parseInt(r[i])<parseInt(t[i]))return!1;return!0}("2.5.0",window.Alpine.version))throw new Error("Invalid Alpine version. Please use Alpine version 2.5.0 or above")},n=function(e,n,t){n.getAttribute("x-bind:data-last-refresh")||n.setAttribute("x-bind:data-last-refresh","Date.now()");return new Proxy(e,function e(r){return void 0===r&&(r=null),{get:function(t,i){var o;if(null!==t[i]&&"object"==typeof t[i]){var a=r?r+"."+i:i;return new Proxy(t[i],e(a))}return"function"==typeof t[i]&&n.__x?t[i].bind(n.__x.$data):null===r&&!t[i]&&null!=n&&null!=(o=n.__x)&&o.$data[i]?n.__x.$data[i]:t[i]},set:function(e,i,o){if(!n.__x)throw new Error("Error communicating with observed component");var a=r?r+"."+i:i;return t.call(n,n.__x.$data,a,o),!0}}}())},t=function(e,n){e.getAttribute("x-bind:data-last-refresh")||e.setAttribute("x-bind:data-last-refresh","Date.now()"),new MutationObserver(function(t){for(var r=0;r<t.length;r++){var i=t[r].target.closest("[x-data]");if(!i||i.isSameNode(e))return void n()}}).observe(e,{attributes:!0,childList:!0,subtree:!0})},r=function(e,n,t){return(n=n.toString().match(/[^.[\]]+/g)||[]).slice(0,-1).reduce(function(e,t,r){return Object(e[t])!==e[t]&&(e[t]=Math.abs(n[r+1])>>0==+n[r+1]?[]:{}),e[t]},e)[n[n.length-1]]=t,e},i=function(e,n){var t=e.__x?e.__x.getUnobservedData():function(e,n,t){void 0===t&&(t={});if("function"==typeof e)return e.call(n);return new Function(["$data"].concat(Object.keys(t)),"var __alpine_result; with($data) { __alpine_result = "+e+" }; return __alpine_result").apply(void 0,[n].concat(Object.values(t)))}(e.getAttribute("x-data"),e);return n?(n=Array.isArray(n)?n:[n]).reduce(function(e,n){return e[n]=t[n],e},{}):t};function o(e,n,t){return e.__x?t():(window.requestAnimationFrame(function(){return n.__x.updateElements(n)}),r={get:function(e,n){return new Proxy(function(){return""},r)}},new Proxy(function(){return""},r));var r}window.Alpine&&!window.AlpineMagicHelpers.__fatal&&(window.AlpineMagicHelpers.__fatal=setTimeout(function(){console.error("%c*** ALPINE MAGIC HELPER: Fatal Error! ***\n\n\nAlpine magic helpers need to be loaded before Alpine to avoid errors when Alpine initialises its component. \n\nMake sure the helper script is included before Alpine in your page when using the defer attribute","font-size: 14px")},200));var a={start:function(){e(),Alpine.addMagicProperty("parent",function(e){if(void 0!==e.$parent)return e.$parent;var a=e.parentNode.closest("[x-data]");if(!a)throw new Error("Parent component not found");return o(a,e,function(){return e.$parent=n(i(a),a,r),t(a,function(){e.$parent=n(a.__x.getUnobservedData(),a,r),e.__x.updateElements(e)}),e.$parent})}),Alpine.addMagicProperty("component",function(e){return function(a){var u=this;if(void 0!==this[a])return this[a];var l=document.querySelector('[x-data][x-id="'+a+'"], [x-data]#'+a);if(!l)throw new Error("Component not found");return o(l,e,function(){return u[a]=n(i(l),l,r),t(l,function(){u[a]=n(l.__x.getUnobservedData(),l,r),e.__x.updateElements(e)}),u[a]})}})}},u=window.deferLoadingAlpine||function(e){return e()};return window.deferLoadingAlpine=function(e){a.start(),u(e)},a});